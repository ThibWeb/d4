// Generated by CoffeeScript 1.4.0
(function() {
  var diffDays, oneDay, timeDisplay;

  console.log('D4 launched ! ' + projectURI);

  oneDay = 24 * 60 * 60 * 1000;

  timeDisplay = function(days) {
    if (pageLang === 'fr') {
      return "Il y a " + days + " jours";
    } else {
      return "" + days + " days ago";
    }
  };

  diffDays = function(date) {
    var now, thenn;
    now = new Date().getTime();
    thenn = new Date(date).getTime();
    return Math.round(Math.abs((now - thenn) / oneDay));
  };

  $(function() {
    $('time').tooltip({
      title: function() {
        return timeDisplay(diffDays($(this).html()));
      }
    });
    $('.tooltip-js').tooltip();
    $('dd').popover({
      trigger: 'hover',
      placement: 'right'
    });
    $('.triples').popover({
      html: true,
      trigger: 'hover',
      placement: 'bottom',
      title: "" + extractLabel,
      content: function() {
        return extract[$(this).attr('data-index')];
      }
    });
    $('.long-string').each(function() {
      var $this;
      $this = $(this);
      if ($this.html().length > 35) {
        $this.tooltip({
          title: $this.html()
        });
        return $this.html(_.prune($this.html(), 35, '&hellip;'));
      }
    });
    $('.dimension-string').each(function() {
      var $this;
      $this = $(this);
      $this.tooltip();
      if (_.startsWith($this.html(), 'http://')) {
        $this.html(_.humanize(_.strRightBack($this.html(), '/')));
      } else {
        $this.html(_.titleize(_.swapCase($this.html())));
      }
    });
    $('.measure-int').each(function() {
      var $this;
      $this = $(this);
      return $this.html(_.numberFormat(_.toNumber($this.html()), 0, decimalSeparator, thousandsSeparator));
    });
    if (pageLang === 'en') {
      $('.observation-table').dataTable({
        'aoColumns': [
          {
            'sType': 'html'
          }, {
            'sType': 'data-numeric'
          }
        ]
      });
    } else {
      $('.observation-table').dataTable({
        'aoColumns': [
          {
            'sType': 'html'
          }, {
            'sType': 'data-numeric'
          }
        ],
        'oLanguage': {
          'sProcessing': 'Traitement en cours...',
          'sSearch': 'Rechercher&nbsp;:',
          'sLengthMenu': 'Afficher _MENU_ &eacute;l&eacute;ments',
          'sInfo': 'Affichage de l\'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments',
          'sInfoEmpty': 'Affichage de l\'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments',
          'sInfoFiltered': '(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)',
          'sInfoPostFix': '',
          'sLoadingRecords': 'Chargement en cours...',
          'sZeroRecords': 'Aucun &eacute;l&eacute;ment &agrave; afficher',
          'sEmptyTable': 'Aucune donnée disponible dans le tableau',
          'oPaginate': {
            'sFirst': 'Premier',
            'sPrevious': 'Pr&eacute;c&eacute;dent',
            'sNext': 'Suivant',
            'sLast': 'Dernier'
          },
          'oAria': {
            'sSortAscending': ': activer pour trier la colonne par ordre croissant',
            'sSortDescending': ': activer pour trier la colonne par ordre décroissant'
          }
        }
      });
      console.log('?');
    }
    return console.log('This is awesome !');
  });

}).call(this);
